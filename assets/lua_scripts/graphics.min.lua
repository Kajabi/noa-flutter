Graphics={}Graphics.__index=Graphics;function Graphics.new()local self=setmetatable({},Graphics)self:clear()return self end;function Graphics:clear()self.__text=""self.__emoji=""self.__rad=""self.__color='WHITE'self.__this_line=""self.__last_line=""self.__last_last_line=""self.__starting_index=1;self.__current_index=1;self.__ending_index=1;self.__done_function=(function()end)()end;function Graphics:append_text(a,b,c)self.__text=self.__text..string.gsub(a,"\n+"," ")self.__emoji=b;if c~=nil then self.__color=c end end;function Graphics:on_complete(d)self.__done_function=d end;function flash(e,f)frame.display.bitmap(241,191,160,2,f,string.rep("\xFF",20*e))frame.display.bitmap(311,121,e,2,f,string.rep("\xFF",20*e))end;function Graphics.__print_layout(g,h,i,b,j,c)local k=118;local l=58;local m=91;local n=c or'WHITE'if j=="A"then flash(10,0)elseif j=="C"then flash(20,10)end;frame.display.text(b,640-m,k,{color='YELLOW'})if g==''and h==''then frame.display.text(i,1,k,{color=n})elseif g==''then frame.display.text(h,1,k,{color=n})frame.display.text(i,1,k+l,{color=n})else frame.display.text(g,1,k,{color=n})frame.display.text(h,1,k+l,{color=n})frame.display.text(i,1,k+l*2,{color=n})end;frame.display.show()end;function Graphics:print()if self.__text:sub(self.__starting_index,self.__starting_index)==' 'then self.__starting_index=self.__starting_index+1 end;if self.__current_index>=self.__ending_index then self.__starting_index=self.__ending_index;self.__last_last_line=self.__last_line;self.__last_line=self.__this_line;self.__starting_index=self.__ending_index end;for o=self.__starting_index+22,self.__starting_index,-1 do if self.__text:sub(o,o)==' 'or self.__text:sub(o,o)==''then self.__ending_index=o;break end end;self.__this_line=self.__text:sub(self.__starting_index,self.__current_index)self.__print_layout(self.__last_last_line,self.__last_line,self.__this_line,self.__emoji,self.__rad,self.__color)if self.__current_index>=#self.__text then pcall(self.__done_function)self.__done_function=(function()end)()return end;self.__current_index=self.__current_index+1 end
